(()=>{"use strict";var e,t={261:(e,t,o)=>{var n=o(540),r=o(338);const i=({newTodo:e,setNewTodo:t,addTodo:o})=>n.createElement("form",{onSubmit:o},n.createElement("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Add a new todo",style:{width:"100%",marginBottom:"8px",padding:"4px"}})),a=({tab:e,todoId:t,removeTab:o,isSelected:r,onSelect:i})=>n.createElement("li",{style:{marginBottom:"4px",display:"flex",flexDirection:"column",gap:"4px"}},n.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px",backgroundColor:r?"#f0f0f0":"transparent",borderRadius:"4px",cursor:"pointer"},onClick:i},n.createElement("a",{href:e.currentUrl,onClick:t=>{t.preventDefault(),t.stopPropagation(),chrome.tabs.create({url:e.currentUrl})},style:{color:"#0066cc",textDecoration:"none",flex:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}},e.title),n.createElement("span",{style:{fontSize:"0.8em",color:"#666",flex:1}}),n.createElement("button",{onClick:n=>{n.stopPropagation(),o(t,e.id)},style:{fontSize:"0.8em",padding:"2px 4px",background:"none",border:"none",cursor:"pointer",color:"#666",justifySelf:"flex-end"}},"Ã—")),r&&e.history&&e.history.length>0&&n.createElement("ul",{style:{margin:"4px 0 0 20px",padding:0,fontSize:"0.9em",color:"#666",listStyle:"none"}},e.history.map(((e,t)=>n.createElement("li",{key:t,style:{marginBottom:"2px",padding:"2px 4px"}},n.createElement("a",{href:e,onClick:t=>{t.preventDefault(),chrome.tabs.create({url:e})},style:{color:"#666",textDecoration:"none",fontSize:"0.9em",display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:e},e)))))),d=({tabs:e,todoId:t,removeTab:o,selectedTabId:r,onTabSelect:i})=>n.createElement("div",{style:{marginLeft:"24px",marginBottom:"8px",fontSize:"0.9em"}},n.createElement("div",{style:{fontWeight:"bold",marginBottom:"4px"}},"Related Tabs:"),n.createElement("ul",{style:{margin:0,paddingLeft:"16px"}},e.map((e=>n.createElement(a,{key:e.id,tab:e,todoId:t,removeTab:o,isSelected:r===e.id,onSelect:()=>i(r===e.id?null:e.id)}))))),l=({todo:e,toggleActive:t,toggleTodo:o,deleteTodo:r,removeTab:i})=>{const[a,l]=(0,n.useState)(null);return n.createElement("li",{key:e.id},n.createElement("div",{onClick:o=>{o.preventDefault(),o.stopPropagation(),t(e.id)},style:{display:"flex",alignItems:"center",marginBottom:"8px",padding:"8px",backgroundColor:e.active?"#e0e0e0":"transparent",cursor:"pointer",borderRadius:"4px"}},n.createElement("input",{type:"checkbox",checked:e.completed,onChange:t=>{t.stopPropagation(),o(e.id)}}),n.createElement("span",{style:{marginLeft:"8px",textDecoration:e.completed?"line-through":"none",flex:1}},e.text),n.createElement("button",{onClick:t=>{t.stopPropagation(),r(e.id)},style:{marginLeft:"8px"}},"Delete")),e.active&&e.tabs&&e.tabs.length>0&&n.createElement(d,{tabs:e.tabs,todoId:e.id,removeTab:i,selectedTabId:a,onTabSelect:l}))};var c=function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function d(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,d)}l((n=n.apply(e,t||[])).next())}))};(0,r.H)(document.getElementById("root")).render(n.createElement(n.StrictMode,null,n.createElement((()=>{const{todos:e,setTodos:t}=(()=>{const[e,t]=(0,n.useState)([]),o=(0,n.useRef)(!1);return(0,n.useEffect)((()=>{chrome.storage.local.get(["todos"],(e=>{e.todos&&t(e.todos)}));const e=e=>{e.todos&&!o.current&&t(e.todos.newValue),o.current||(o.current=!1)};return chrome.storage.onChanged.addListener(e),()=>{chrome.storage.onChanged.removeListener(e)}}),[]),(0,n.useEffect)((()=>{(e.length>0||o.current)&&(o.current=!0,chrome.storage.local.set({todos:e}))}),[e]),{todos:e,setTodos:t}})(),[o,r]=(0,n.useState)(""),a=o=>{t(e.map((e=>e.id===o?Object.assign(Object.assign({},e),{completed:!e.completed}):e)))},d=o=>{t(e.filter((e=>e.id!==o)));const n=e.find((e=>e.id===o));(null==n?void 0:n.active)&&chrome.runtime.sendMessage({type:"SET_ACTIVE_TODO",todoId:null})},s=o=>c(void 0,void 0,void 0,(function*(){const n=e.map((e=>e.id===o?Object.assign(Object.assign({},e),{active:!e.active}):Object.assign(Object.assign({},e),{active:!1})));t(n);const r=n.find((e=>e.active));chrome.runtime.sendMessage({type:"SET_ACTIVE_TODO",todoId:r?r.id:null},(()=>c(void 0,void 0,void 0,(function*(){r&&(yield m(r))}))))})),p=(o,n)=>{t(e.map((e=>{var t;return e.id===o?Object.assign(Object.assign({},e),{tabs:null===(t=e.tabs)||void 0===t?void 0:t.filter((e=>e.id!==n))}):e})))},m=e=>c(void 0,void 0,void 0,(function*(){if(!e.windowId||e.windowId!==chrome.windows.WINDOW_ID_CURRENT)if(e.windowId)try{yield chrome.windows.update(e.windowId,{focused:!0})}catch(t){u(e)}else u(e)})),u=o=>c(void 0,void 0,void 0,(function*(){var n;if(!(null===(n=o.tabs)||void 0===n?void 0:n.length))return;const r=yield chrome.windows.create({url:o.tabs[0].currentUrl,focused:!0});r.id&&(o.tabs.forEach((e=>c(void 0,void 0,void 0,(function*(){yield chrome.tabs.create({windowId:r.id,url:e.currentUrl})})))),t(e.map((e=>e.id===o.id?Object.assign(Object.assign({},e),{windowId:r.id}):e))))}));return n.createElement("div",{style:{minWidth:"300px",padding:"16px"}},n.createElement(i,{newTodo:o,setNewTodo:r,addTodo:n=>c(void 0,void 0,void 0,(function*(){if(n.preventDefault(),!o.trim())return;const i=yield chrome.windows.getCurrent(),a={id:Date.now(),text:o,completed:!1,tabs:[],windowId:i.id};t([...e,a]),r("")}))}),n.createElement("ul",{style:{listStyle:"none",padding:0}},e.map((e=>n.createElement(l,{key:e.id,todo:e,toggleActive:s,toggleTodo:a,deleteTodo:d,removeTab:p})))))}),null)))}},o={};function n(e){var r=o[e];if(void 0!==r)return r.exports;var i=o[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.m=t,e=[],n.O=(t,o,r,i)=>{if(!o){var a=1/0;for(s=0;s<e.length;s++){for(var[o,r,i]=e[s],d=!0,l=0;l<o.length;l++)(!1&i||a>=i)&&Object.keys(n.O).every((e=>n.O[e](o[l])))?o.splice(l--,1):(d=!1,i<a&&(a=i));if(d){e.splice(s--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[o,r,i]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={887:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var r,i,[a,d,l]=o,c=0;if(a.some((t=>0!==e[t]))){for(r in d)n.o(d,r)&&(n.m[r]=d[r]);if(l)var s=l(n)}for(t&&t(o);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(s)},o=self.webpackChunkchrome_extension_typescript_starter=self.webpackChunkchrome_extension_typescript_starter||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var r=n.O(void 0,[121],(()=>n(261)));r=n.O(r)})();